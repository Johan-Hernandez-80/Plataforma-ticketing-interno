# üìÑ Criterios de Aceptaci√≥n ‚Äî Sistema de Ticketing Interno

Este documento contiene los criterios de aceptaci√≥n derivados de las historias de
usuario, organizados por rol (Empleado, Agente, Admin), en el contexto de la `API`.

[Historias de usuario](../1.Requirements/3.UserStories.md)

## üë§ Empleado

### `HU-01` ‚Äî Iniciar sesi√≥n

- M√©todo HTTP `POST`
- Endpoint `/auth/login`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "token": "<jwt-token>"
}
```

---

### `HU-02` ‚Äî Crear un ticket

- M√©todo HTTP `POST`
- Endpoint `/tickets`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-13T23:49:10.274Z",
  "fechaCierre": "2025-09-13T23:49:10.274Z"
}
```

---

### `HU-03` ‚Äî Ver tabla de tickets

- M√©todo HTTP `GET`
- Endpoint `/tickets`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `HU-04` ‚Äî Ver detalles de ticket

- M√©todo HTTP `GET`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-13T23:52:57.576Z",
  "fechaCierre": "2025-09-13T23:52:57.576Z"
}
```

---

### `HU-05` ‚Äî Ver proceso del ticket

- M√©todo HTTP `GET`
- Endpoint `/comentarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "ticketId": 0,
    "usuarioId": 0,
    "comentario": "string",
    "fechaCreacion": "2025-09-13T23:58:27.793Z"
  }
]
```

---

### `HU-06` ‚Äî Estar notificado

- M√©todo HTTP `GET`
- Endpoint `/notificaciones`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "mensaje": "string",
    "fechaCreacion": "2025-09-14T00:01:56.567Z"
  }
]
```

---

### `HU-07` ‚Äî Cambiar contrase√±a y datos

- M√©todo HTTP `PATCH`
- Endpoint `/usuarios/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "rolId": 0,
  "nombre": "string",
  "emailPersonal": "string",
  "emailCorporativo": "string",
  "contrasena": "string",
  "departamento": "string"
}
```

---

### `HU-08` ‚Äî Cerrar sesi√≥n

- Esta historia de usuario no requiere ning√∫n acceso a un endpoint

---

## üíº Agente

### `HU-01` ‚Äî Iniciar sesi√≥n

- M√©todo HTTP `POST`
- Endpoint `/auth/login`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "token": "<jwt-token>"
}
```

---

### `HU-02` ‚Äî Ver tabla de tickets asignados

- M√©todo HTTP `GET`
- Endpoint `/tickets?asignadoA={agenteId}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `HU-03` ‚Äî Ver informaci√≥n de ticket

- M√©todo HTTP `GET`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-13T23:52:57.576Z",
  "fechaCierre": "2025-09-13T23:52:57.576Z"
}
```

---

### HU-04 - Ver proceso del ticket

- M√©todo HTTP `GET`
- Endpoint `/comentarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "ticketId": 0,
    "usuarioId": 0,
    "comentario": "string",
    "fechaCreacion": "2025-09-13T23:58:27.793Z"
  }
]
```

### `HU-05` ‚Äî Ver historial de tickets

- M√©todo HTTP `GET`
- Endpoint `/tickets`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `HU-06` ‚Äî Comentar en proceso de ticket

- M√©todo HTTP `POST`
- Endpoint `/comentarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "ticketId": 0,
  "usuarioId": 0,
  "comentario": "string",
  "fechaCreacion": "2025-09-14T01:01:35.589Z"
}
```

---

### `HU-07` ‚Äî Estar notificado sobre tickets asignados

- M√©todo HTTP `GET`
- Endpoint `/notificaciones`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "mensaje": "string",
    "fechaCreacion": "2025-09-14T00:01:56.567Z"
  }
]
```

---

### `HU-08` ‚Äî Cambiar prioridad del ticket

- M√©todo HTTP `PATCH`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-14T01:12:09.661Z",
  "fechaCierre": "2025-09-14T01:12:09.661Z"
}
```

---

### `HU-09` ‚Äî Cerrar ticket

- M√©todo HTTP `PATCH`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-14T01:12:09.661Z",
  "fechaCierre": "2025-09-14T01:12:09.661Z"
}
```

---

### `HU-10` ‚Äî Cambiar contrase√±a y datos

- M√©todo HTTP `PATCH`
- Endpoint `/usuarios/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "rolId": 0,
  "nombre": "string",
  "emailPersonal": "string",
  "emailCorporativo": "string",
  "contrasena": "string",
  "departamento": "string"
}
```

---

### `HU-11` ‚Äî Cerrar sesi√≥n

- Esta historia de usuario no requiere ning√∫n acceso a un endpoint

---

## üíª Admin

### `HU-01` ‚Äî Iniciar sesi√≥n con cuenta por defecto

- M√©todo HTTP `POST`
- Endpoint `/auth/login`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "token": "<jwt-token>"
}
```

---

### `HU-02` ‚Äî Reasignar tickets

- M√©todo HTTP `PATCH`
- Endpoint `/asignaciones/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "ticketId": 0,
  "agenteId": 0,
  "fechaCreacion": "2025-09-14T01:18:03.732Z"
}
```

---

### `HU-03` ‚Äî Crear categor√≠as

- M√©todo HTTP `POST`
- Endpoint `/categorias`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "nombre": "string",
  "descripcion": "string"
}
```

---

### `HU-04` ‚Äî Crear cuentas de empleados y agentes

- M√©todo HTTP `POST`
- Endpoint `/usuarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "rolId": 0,
  "nombre": "string",
  "emailPersonal": "string",
  "emailCorporativo": "string",
  "contrasena": "string",
  "departamento": "string"
}
```

---

### `HU-05` ‚Äî Ver tabla de todos los tickets

- M√©todo HTTP `GET`
- Endpoint `/tickets`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `HU-06` ‚Äî Ver proceso del ticket

- M√©todo HTTP `GET`
- Endpoint `/comentarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
[
  {
    "id": 0,
    "ticketId": 0,
    "usuarioId": 0,
    "comentario": "string",
    "fechaCreacion": "2025-09-13T23:58:27.793Z"
  }
]
```

---

### `HU-07` ‚Äî Ver informaci√≥n completa del ticket

- M√©todo HTTP `GET`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-13T23:52:57.576Z",
  "fechaCierre": "2025-09-13T23:52:57.576Z"
}
```

---

### `HU-08` ‚Äî Comentar en el proceso

- M√©todo HTTP `POST`
- Endpoint `/comentarios`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "ticketId": 0,
  "usuarioId": 0,
  "comentario": "string",
  "fechaCreacion": "2025-09-14T01:01:35.589Z"
}
```

---

### `HU-09` ‚Äî Cerrar ticket

- M√©todo HTTP `PATCH`
- Endpoint `/tickets/{id}`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-14T01:12:09.661Z",
  "fechaCierre": "2025-09-14T01:12:09.661Z"
}
```

---

### `HU-10` ‚Äî Exportar informes en PDF

- M√©todo HTTP `GET`
- Endpoint `/reportes/exportar`
- El c√≥digo de estado HTTP retornado debe ser `200`
- Cabecera `Content-Type` debe ser `application/pdf`
- El cuerpo de la respuesta ser√° un archivo PDF descargable

---

### `HU-11` ‚Äî Ver dashboard con m√©tricas

- M√©todo HTTP `GET`
- Endpoint `/dashboard/metricas`
- El c√≥digo de estado HTTP retornado debe ser `200`
- El cuerpo de la respuesta debe tener esta estructura

```json
{
  "tickets": {
    "abiertos": 0,
    "cerrados": 0
  },
  "porCategoria": [
    {
      "categoriaId": 0,
      "nombre": "string",
      "conteo": 0
    }
  ],
  "usuariosPorRol": [
    {
      "rolId": 0,
      "rol": "string",
      "cantidad": 0
    }
  ]
}
```

### `HU-12` ‚Äî Cerrar sesi√≥n

- Esta historia de usuario no requiere ning√∫n acceso a un endpoint

---

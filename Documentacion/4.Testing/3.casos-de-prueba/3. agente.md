# Casos de prueba para Agente

### `CP-02`

- **Caso de Prueba**: Ver tickets asignados al agente
- **Endpoint**: `/tickets?asignadoA={agenteId}`
- **Método HTTP**: `GET`
- **Descripción**: Obtiene la lista de tickets asignados al agente.
- **Parámetros**: `asignadoA` como query param (ID del agente)
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve un arreglo con los tickets asignados:

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `CP-03`

- **Caso de Prueba**: Consultar detalles de un ticket
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `GET`
- **Descripción**: Permite al agente ver los detalles completos de un ticket específico.
- **Parámetros**: ID del ticket en URL
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve el ticket con toda su información:

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "string",
  "fechaCreacion": "2025-09-13T23:52:57.576Z",
  "fechaCierre": "2025-09-13T23:52:57.576Z"
}
```

---

### `CP-04`

- **Caso de Prueba**: Consultar comentarios de un ticket
- **Endpoint**: `/comentarios?ticketId={id}`
- **Método HTTP**: `GET`
- **Descripción**: Obtiene todos los comentarios asociados a un ticket.
- **Parámetros**: `ticketId` como query param
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve un arreglo con los comentarios:

```json
[
  {
    "id": 0,
    "ticketId": 0,
    "usuarioId": 0,
    "comentario": "string",
    "fechaCreacion": "2025-09-13T23:58:27.793Z"
  }
]
```

---

### `CP-05`

- **Caso de Prueba**: Ver historial completo de tickets
- **Endpoint**: `/tickets`
- **Método HTTP**: `GET`
- **Descripción**: Permite al agente ver todos los tickets que ha manejado o a los que tiene acceso.
- **Parámetros**: Opcionales para filtros (estado, fecha, etc.)
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve un arreglo con los tickets:

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "categoriaId": 0,
    "titulo": "string",
    "descripcion": "string",
    "prioridad": "string",
    "estado": "string",
    "fechaCreacion": "2025-09-13T23:51:22.669Z",
    "fechaCierre": "2025-09-13T23:51:22.669Z"
  }
]
```

---

### `CP-06`

- **Caso de Prueba**: Crear un comentario en un ticket
- **Endpoint**: `/comentarios`
- **Método HTTP**: `POST`
- **Descripción**: Permite al agente añadir un comentario al proceso del ticket.
- **Parámetros**: Cuerpo con la siguiente estructura:

```json
{
  "ticketId": 0,
  "usuarioId": 0,
  "comentario": "string"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve el comentario creado con fecha de creación:

```json
{
  "id": 0,
  "ticketId": 0,
  "usuarioId": 0,
  "comentario": "string",
  "fechaCreacion": "2025-09-14T01:01:35.589Z"
}
```

---

### `CP-07`

- **Caso de Prueba**: Ver notificaciones de tickets asignados
- **Endpoint**: `/notificaciones`
- **Método HTTP**: `GET`
- **Descripción**: Muestra las notificaciones activas para el agente.
- **Parámetros**: Ninguno
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve un arreglo con las notificaciones:

```json
[
  {
    "id": 0,
    "usuarioId": 0,
    "mensaje": "string",
    "fechaCreacion": "2025-09-14T00:01:56.567Z"
  }
]
```

---

### `CP-08`

- **Caso de Prueba**: Actualizar prioridad de un ticket
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `PATCH`
- **Descripción**: Permite al agente cambiar la prioridad del ticket asignado.
- **Parámetros**: Cuerpo con la nueva prioridad:

```json
{
  "prioridad": "alta"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: El ticket responde con la prioridad actualizada:

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "alta",
  "estado": "string",
  "fechaCreacion": "2025-09-14T01:12:09.661Z",
  "fechaCierre": "2025-09-14T01:12:09.661Z"
}
```

---

### `CP-09`

- **Caso de Prueba**: Cerrar un ticket
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `PATCH`
- **Descripción**: Permite al agente cerrar un ticket (estado `cerrado`).
- **Parámetros**: Cuerpo con estado actualizado:

```json
{
  "estado": "cerrado"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve el ticket con estado actualizado:

```json
{
  "id": 0,
  "usuarioId": 0,
  "categoriaId": 0,
  "titulo": "string",
  "descripcion": "string",
  "prioridad": "string",
  "estado": "cerrado",
  "fechaCreacion": "2025-09-14T01:12:09.661Z",
  "fechaCierre": "2025-09-14T01:12:09.661Z"
}
```

---

### `CP-10`

- **Caso de Prueba**: Actualizar datos personales del agente
- **Endpoint**: `/usuarios/{id}`
- **Método HTTP**: `PATCH`
- **Descripción**: El agente puede actualizar su email persona o contraseña.
- **Parámetros**: Cuerpo con campos a actualizar, ejemplo:

```json
{
  "nombre": "string",
  "email": "string",
  "departamento": "string",
  "password": "string"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Se devuelve el usuario actualizado:

```json
{
  "id": 0,
  "nombre": "string",
  "email": "string",
  "departamento": "string"
}
```

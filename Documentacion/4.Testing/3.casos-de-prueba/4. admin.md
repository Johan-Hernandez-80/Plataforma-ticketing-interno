# Casos de prueba para Admin

### `CP-02`

- **Caso de Prueba**: Reasignar tickets a los agentes
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `PATCH`
- **Descripción**: El admin reasigna un ticket a otro agente.
- **Parámetros**:

```json
{
  "asignadoA": 123 // ID del agente
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: El ticket refleja el nuevo agente asignado:

```json
{
  "id": 0,
  "asignadoA": 123,
  "estado": "abierto"
}
```

---

### `CP-03`

- **Caso de Prueba**: Crear categorías para los tickets
- **Endpoint**: `/categorias`
- **Método HTTP**: `POST`
- **Descripción**: El admin crea nuevas categorías para clasificar tickets.
- **Parámetros**:

```json
{
  "nombre": "Hardware",
  "descripcion": "Problemas relacionados con hardware"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `201 Created`
- **Prueba Exitosa si**: Devuelve la categoría creada:

```json
{
  "id": 10,
  "nombre": "Hardware",
  "descripcion": "Problemas relacionados con hardware"
}
```

---

### `CP-04`

- **Caso de Prueba**: Crear cuentas de empleados y agentes
- **Endpoint**: `/usuarios`
- **Método HTTP**: `POST`
- **Descripción**: El admin crea cuentas para nuevos empleados o agentes.
- **Parámetros**:

```json
{
  "nombre": "Juan Perez",
  "email": "juan.perez@empresa.com",
  "password": "password123",
  "rol": "empleado",
  "departamento": "Soporte"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `201 Created`
- **Prueba Exitosa si**: Devuelve datos del usuario creado:

```json
{
  "id": 5,
  "nombre": "Juan Perez",
  "email": "juan.perez@empresa.com",
  "rol": "empleado",
  "departamento": "Soporte"
}
```

---

### `CP-05`

- **Caso de Prueba**: Ver una tabla de todos los tickets, filtrada por estado, prioridad, agente o fecha
- **Endpoint**: `/tickets`
- **Método HTTP**: `GET`
- **Descripción**: El admin consulta tickets con filtros opcionales.
- **Parámetros**: Query string opcional, por ejemplo:

```
/tickets?estado=abierto&prioridad=alta&agente=123&fechaDesde=2025-09-01&fechaHasta=2025-09-13
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Devuelve lista de tickets filtrados:

```json
[
  {
    "id": 1,
    "titulo": "Problema con impresora",
    "estado": "abierto",
    "prioridad": "alta",
    "asignadoA": 123,
    "fechaCreacion": "2025-09-10T10:00:00Z"
  }
]
```

---

### `CP-06`

- **Caso de Prueba**: Ver el proceso del ticket con una lista de comentarios
- **Endpoint**: `/tickets/{id}/comentarios`
- **Método HTTP**: `GET`
- **Descripción**: El admin consulta los comentarios relacionados a un ticket.
- **Parámetros**: ID del ticket en URL
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Devuelve lista de comentarios:

```json
[
  {
    "id": 101,
    "usuarioId": 5,
    "comentario": "Se está revisando el equipo",
    "fecha": "2025-09-11T14:00:00Z"
  }
]
```

---

### `CP-07`

- **Caso de Prueba**: Ver la información completa de cada ticket después de seleccionarlo desde la tabla
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `GET`
- **Descripción**: El admin visualiza detalles completos de un ticket.
- **Parámetros**: ID del ticket en URL
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Devuelve información completa:

```json
{
  "id": 1,
  "titulo": "Problema con impresora",
  "descripcion": "La impresora no imprime desde varios PCs",
  "estado": "abierto",
  "prioridad": "alta",
  "asignadoA": 123,
  "categoria": "Hardware",
  "fechaCreacion": "2025-09-10T10:00:00Z",
  "fechaCierre": null
}
```

---

### `CP-08`

- **Caso de Prueba**: Escribir comentarios en el proceso de los tickets
- **Endpoint**: `/tickets/{id}/comentarios`
- **Método HTTP**: `POST`
- **Descripción**: El admin añade comentarios al seguimiento de un ticket.
- **Parámetros**:

```json
{
  "comentario": "Se asignó un técnico para revisión."
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `201 Created`
- **Prueba Exitosa si**: Se devuelve el comentario creado:

```json
{
  "id": 102,
  "usuarioId": 1,
  "comentario": "Se asignó un técnico para revisión.",
  "fecha": "2025-09-13T12:00:00Z"
}
```

---

### `CP-09`

- **Caso de Prueba**: Cerrar los tickets
- **Endpoint**: `/tickets/{id}`
- **Método HTTP**: `PATCH`
- **Descripción**: El admin actualiza el estado del ticket a cerrado.
- **Parámetros**:

```json
{
  "estado": "cerrado",
  "fechaCierre": "2025-09-13T15:00:00Z"
}
```

- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: El ticket muestra estado cerrado y fecha de cierre:

```json
{
  "id": 1,
  "estado": "cerrado",
  "fechaCierre": "2025-09-13T15:00:00Z"
}
```

---

### `CP-10`

- **Caso de Prueba**: Exportar informes del sistema en `PDF`
- **Endpoint**: `/reportes/exportar`
- **Método HTTP**: `GET`
- **Descripción**: El admin genera y descarga reportes en formato PDF.
- **Parámetros**: Opcionales para filtrar reporte (fecha, estado, etc.)
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK` con header:

```
Content-Type: application/pdf
Content-Disposition: attachment; filename="reporte.pdf"
```

- **Prueba Exitosa si**: El archivo PDF es descargado correctamente.

---

### `CP-11`

- **Caso de Prueba**: Ver un dashboard con métricas
- **Endpoint**: `/dashboard/metricas`
- **Método HTTP**: `GET`
- **Descripción**: El admin consulta métricas clave del sistema (tickets abiertos, cerrados, tiempos de respuesta, etc.)
- **Parámetros**: Ninguno
- **Headers**: `Authorization: Bearer <jwt-token>`
- **Código de Respuesta Esperado**: `200 OK`
- **Prueba Exitosa si**: Respuesta contiene métricas, por ejemplo:

```json
{
  "ticketsAbiertos": 12,
  "ticketsCerrados": 45,
  "promedioRespuesta": "2h 15m"
}
```

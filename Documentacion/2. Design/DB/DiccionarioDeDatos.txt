# Ticketing Database Data Dictionary

## Database: `ticketing`

---

### Table: `roles`
| Column | Type          | Null | Key          | Description            |
|--------|---------------|------|--------------|------------------------|
| id     | INT           | NO   | PK, AI       | Unique role identifier |
| nombre | VARCHAR(255)  | NO   | UQ           | Name of the role       |

---

### Table: `permisos`
| Column | Type          | Null | Key          | Description                  |
|--------|---------------|------|--------------|------------------------------|
| id     | INT           | NO   | PK, AI       | Unique permission identifier |
| nombre | VARCHAR(255)  | NO   | UQ           | Name of the permission       |

---

### Table: `permisos_roles`
| Column      | Type | Null | Key                 | Description            |
|-------------|------|------|---------------------|------------------------|
| rol_id      | INT  | NO   | PK, FK → roles(id)  | Role reference         |
| permiso_id  | INT  | NO   | PK, FK → permisos(id) | Permission reference |

---

### Table: `usuarios`
| Column            | Type          | Null | Key            | Description               |
|-------------------|---------------|------|----------------|---------------------------|
| id                | INT           | NO   | PK, AI         | Unique user identifier    |
| rol_id            | INT           | NO   | FK → roles(id) | Role assigned to the user |
| nombre            | VARCHAR(255)  | NO   |                | User's full name          |
| email_personal    | VARCHAR(255)  | YES  | UQ             | Personal email            |
| email_corporativo | VARCHAR(255)  | NO   | UQ             | Corporate email           |
| contrasena        | VARCHAR(255)  | NO   |                | Password (hashed)         |
| departamento      | VARCHAR(255)  | NO   |                | Department name           |

---

### Table: `categorias`
| Column      | Type          | Null | Key     | Description                |
|-------------|---------------|------|---------|----------------------------|
| id          | INT           | NO   | PK, AI  | Unique category identifier |
| nombre      | VARCHAR(255)  | NO   |         | Category name              |
| descripcion | VARCHAR(255)  | YES  |         | Category description       |

---

### Table: `tickets`
| Column          | Type          | Null | Key                 | Description                 |
|-----------------|---------------|------|---------------------|-----------------------------|
| id              | INT           | NO   | PK, AI              | Ticket identifier           |
| usuario_id      | INT           | NO   | FK → usuarios(id)   | User who created the ticket |
| categoria_id    | INT           | NO   | FK → categorias(id) | Category of the ticket      |
| titulo          | VARCHAR(255)  | NO   |                     | Ticket title                |
| descripcion     | VARCHAR(1000) | NO   |                     | Ticket description          |
| prioridad       | VARCHAR(255)  | NO   |                     | Ticket priority             |
| estado          | VARCHAR(255)  | NO   |                     | Ticket status               |
| fecha_creacion  | TIMESTAMP     | NO   |                     | Creation timestamp          |
| fecha_cierre    | TIMESTAMP     | YES  |                     | Closing timestamp           |

---

### Table: `asignaciones`
| Column         | Type      | Null | Key               | Description           |
|----------------|-----------|------|-------------------|-----------------------|
| id             | INT       | NO   | PK, AI            | Assignment identifier |
| ticket_id      | INT       | NO   | FK → tickets(id)  | Ticket reference      |
| agente_id      | INT       | NO   | FK → usuarios(id) | Assigned agent        |
| fecha_creacion | TIMESTAMP | NO   |                   | Assignment timestamp  |

---

### Table: `comentarios`
| Column         | Type          | Null | Key               | Description        |
|----------------|---------------|------|-------------------|--------------------|
| id             | INT           | NO   | PK, AI            | Comment identifier |
| ticket_id      | INT           | NO   | FK → tickets(id)  | Ticket reference   |
| usuario_id     | INT           | NO   | FK → usuarios(id) | Comment author     |
| comentario     | VARCHAR(1000) | NO   |                   | Comment content    |
| fecha_creacion | TIMESTAMP     | NO   |                   | Creation timestamp |

---

### Table: `historial_tickets`
| Column         | Type         | Null | Key              | Description                |
|----------------|--------------|------|------------------|----------------------------|
| id             | INT          | NO   | PK, AI           | History entry identifier   |
| ticket_id      | INT          | NO   | FK → tickets(id) | Ticket reference           |
| estado_anterior| VARCHAR(255) | NO   |                  | Previous ticket status     |
| estado_nuevo   | VARCHAR(255) | NO   |                  | New ticket status          |
| fecha_creacion | TIMESTAMP    | NO   |                  | Timestamp of status change |

---

### Table: `notificaciones`
| Column         | Type         | Null | Key               | Description                        |
|----------------|--------------|------|-------------------|------------------------------------|
| id             | INT          | NO   | PK, AI            | Notification identifier            |
| usuario_id     | INT          | NO   | FK → usuarios(id) | User who receives the notification |
| mensaje        | VARCHAR(255) | NO   |                   | Notification message               |
| fecha_creacion | TIMESTAMP    | NO   |                   | Creation timestamp                 |
